// =========================================================
// Zellij Configuration - Best Practice for WSL2
// =========================================================

// 1. è§†è§‰è®¾ç½®
// ---------------------------------------------------------
// ä½¿ç”¨ compact å¸ƒå±€ï¼ˆéšè—é¡¶éƒ¨å·¨å¤§çš„çŠ¶æ€æ ï¼Œåªç•™ä¸‹ä¸€æ¡ç»†çº¿ï¼‰
default_layout "compact"

// ğŸš« å…³é—­é¢æ¿è¾¹æ¡†
// è¿™æ˜¯â€œæ²‰æµ¸å¼â€ä½“éªŒçš„å…³é”®ã€‚å»æ‰è¾¹æ¡†åï¼Œä»£ç çª—å£ä¹‹é—´åªæœ‰ä¸€æ¡ç»†çº¿ã€‚
// å¦‚æœä½ åˆšå¼€å§‹ä¸ä¹ æƒ¯ï¼Œå¯ä»¥æ”¹ä¸º trueï¼Œä½†ç†Ÿç»ƒåå»ºè®® false
pane_frames false

// ä¸»é¢˜ï¼šé…åˆä½ çš„ WezTerm Catppuccin Mocha
theme "catppuccin-mocha"

// 2. äº¤äº’è¡Œä¸º
// ---------------------------------------------------------
// é¼ æ ‡æ”¯æŒï¼šå…è®¸ç”¨é¼ æ ‡ç‚¹å‡»åˆ‡æ¢é¢æ¿ã€æ‹–æ‹½è°ƒæ•´å¤§å°
mouse_mode true

// å‰ªè´´æ¿åŒæ­¥ (WSL æ ¸å¿ƒé…ç½®)
// ç¡®ä¿é€‰ä¸­çš„æ–‡æœ¬è‡ªåŠ¨è¿›å…¥ Windows å‰ªè´´æ¿
// WezTerm å…¶å®è‡ªå¸¦ OSC52 æ”¯æŒï¼Œä½†æ˜¾å¼æŒ‡å®š clip.exe æ›´ç¨³å¥
copy_command "clip.exe"

// å¤åˆ¶é€‰ä¸­æ–‡æœ¬æ—¶è‡ªåŠ¨æ¸…é™¤é€‰ä¸­çŠ¶æ€ (ç±»ä¼¼ Windows ä¹ æƒ¯)
copy_on_select false

// 3. å¿«æ·é”®æ˜ å°„ (Keybindings)
// ---------------------------------------------------------
// è¿™é‡Œæˆ‘ä»¬ä¿®æ”¹ "normal" æ¨¡å¼ï¼ŒåŠ å…¥ç›´é€šå¿«æ·é”®
// è®©ä½ ä¸éœ€è¦æŒ‰ Ctrl+p å°±èƒ½åˆ‡æ¢é¢æ¿
keybinds {
    normal {
        // --- é¢æ¿å¯¼èˆª (Alt + Vimæ–¹å‘) ---
        bind "Alt h" { MoveFocus "Left"; }
        bind "Alt l" { MoveFocus "Right"; }
        bind "Alt j" { MoveFocus "Down"; }
        bind "Alt k" { MoveFocus "Up"; }

        // --- é¢æ¿æ“ä½œ ---
        // Alt + n: å‘å³æ–°å»ºé¢æ¿
        bind "Alt n" { NewPane "Right"; }
        // Alt + d: å‘ä¸‹æ–°å»ºé¢æ¿ (Down)
        bind "Alt d" { NewPane "Down"; }
        // Alt + f: å…¨å±å½“å‰é¢æ¿ (Focus/Fullscreen)
        bind "Alt f" { ToggleFocusFullscreen; }
        // Alt + w: å…³é—­å½“å‰é¢æ¿ (Window close)
        bind "Alt w" { CloseFocus; }

        // --- æ ‡ç­¾é¡µæ“ä½œ ---
        // Alt + t: æ–°å»ºæ ‡ç­¾é¡µ
        bind "Alt t" { NewTab; }
        // Alt + [/]: å·¦å³åˆ‡æ¢æ ‡ç­¾
        bind "Alt [" { GoToPreviousTab; }
        bind "Alt ]" { GoToNextTab; }
        // Alt + 1~9: ç›´æ¥è·³è½¬æ ‡ç­¾
        bind "Alt 1" { GoToTab 1; }
        bind "Alt 2" { GoToTab 2; }
        bind "Alt 3" { GoToTab 3; }
        bind "Alt 4" { GoToTab 4; }
    }
    
    // é”å®šæ¨¡å¼ (Ctrl + g)
    // é˜²æ­¢è¯¯è§¦ï¼Œæˆ–è€…å½“ä½ éœ€è¦åµŒå¥— SSH è¿œç¨‹æœåŠ¡å™¨çš„ Zellij/Tmux æ—¶ä½¿ç”¨
    locked {
        bind "Ctrl g" { SwitchToMode "Normal"; }
    }
}
